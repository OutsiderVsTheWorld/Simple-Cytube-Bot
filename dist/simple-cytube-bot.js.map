{"version":3,"sources":["util/message-filter.js","util/stringifyStyles.js","Command.js","commands/dice.js","commands/webm.js","simple-cytube-bot.js"],"names":["msg","replace","trim","styles","style","styleString","Object","entries","reduce","propName","propValue","Command","config","assign","text","handler","params","data","condition","Number","isInteger","randomInteger","min","max","rand","Math","random","floor","normalizeParams","map","param","number","parseInt","isNaN","bot","sendMessage","num","username","CommandWebm","FETCH_PROXY","FILE_TYPE_WEBM","FILE_TYPE_MP4","FILE_TYPES","addMedia","user","video","window","CLIENT","name","socket","emit","id","path","title","fullname","pos","type","temp","getRandomWebm","thread","url","slice","search","fetch","then","res","json","videos","fetchVideosFromThread","length","threads","posts","post","files","file","includes","push","webm","catch","Bot","cmdFilterPrefix","commands","messageStyles","message","display","color","botSendMessage","registerListeners","registerDefaultCommnds","applyBotMessageStyles","console","log","on","LASTCHAT","commandDispatch","commandRegister","CommandDice","elementStyle","document","createElement","nameStyles","innerHTML","head","appendChild","split","cmdText","shift","find","cmd","recieve","formatedMessage","SimpleCytubeBot"],"mappings":"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","file":"simple-cytube-bot.js","sourceRoot":"..\\src","sourcesContent":["export default (msg) => {\r\n  return msg\r\n    .replace(/&#39;/g,  `'`)\r\n    .replace(/&amp;/g,  '&')\r\n    .replace(/&lt;/g,   '<')\r\n    .replace(/&gt;/g,   '>')\r\n    .replace(/&quot;/g, '\"')\r\n    .replace(/&#40;/g,  '(')\r\n    .replace(/&#41;/g,  ')')\r\n    .replace(/(<([^>]+)>)/ig, '')\r\n    .replace(/^[ \\t]+/g, '')\r\n    .trim()\r\n}","export default styles => {\r\n  let style = { ...styles };\r\n  \r\n  let styleString = (\r\n    Object.entries(style).reduce((styleString, [propName, propValue]) => {\r\n      return `${styleString}${propName}:${propValue};`;\r\n    }, '')\r\n  );\r\n\r\n  return styleString\r\n}","class Command {\r\n  constructor(config) {\r\n    Object.assign(this, {\r\n      text: \"\",\r\n      handler: () => {}\r\n    }, config)\r\n  }\r\n\r\n  recieve(params, data) {\r\n    this.handler(params, data)\r\n  }\r\n}\r\n\r\nexport default Command;","function condition(params) {\r\n  return (\r\n    (!params) ||\r\n    (!Number.isInteger(params[0])) ||\r\n    (!Number.isInteger(params[1])) ||\r\n    (params[0] > params[1])\r\n  )\r\n}\r\n\r\nfunction randomInteger(min, max) {\r\n  let rand = min + Math.random() * (max + 1 - min);\r\n  return Math.floor(rand);\r\n}\r\n\r\nexport default {\r\n  text: \"dice\",\r\n  handler: (params, data) => {\r\n    let normalizeParams = params.map(param => {\r\n      let number = parseInt(param);\r\n      return isNaN(number) ? param : number;\r\n    });\r\n\r\n    if (condition(normalizeParams)) {\r\n      return data.bot.sendMessage(\"Использование: !dice <min> <max>\")\r\n    }\r\n\r\n    let min = normalizeParams[0]\r\n    let max = normalizeParams[1]\r\n    let num = randomInteger(min, max)\r\n\r\n    data.bot.sendMessage(`${data.username} бросает кости... Выпало ${num}`)\r\n  }\r\n}","const FETCH_PROXY = \"https://yacdn.org/serve/\"\r\n\r\nconst FILE_TYPE_WEBM = 6\r\nconst FILE_TYPE_MP4 = 10\r\n\r\nconst FILE_TYPES = [FILE_TYPE_WEBM, FILE_TYPE_MP4]\r\n\r\nfunction addMedia(params) {\r\n  const {user, video} = params\r\n\r\n  if (window.CLIENT.name === user) {\r\n    window.socket.emit(\"queue\", {\r\n      id: `https://2ch.hk${video.path}`,\r\n      title: video.fullname,\r\n      pos: \"end\",\r\n      type: \"fi\",\r\n      temp: true\r\n    })\r\n  }\r\n}\r\n\r\nfunction getRandomWebm(thread) {\r\n  let url = thread.slice(0, thread.search(\".html\"))\r\n  url += \".json\"\r\n\r\n  return fetch(`${FETCH_PROXY}${url}`)\r\n  .then(res => res.json())\r\n  .then(data => {\r\n    let videos = fetchVideosFromThread(data)\r\n    return videos[randomInteger(0, videos.length) - 1]\r\n  })\r\n}\r\n\r\nfunction fetchVideosFromThread(thread) {\r\n  let videos = []\r\n\r\n  for (let post of thread.threads[0].posts) {\r\n    for (let file of post.files) {\r\n      if (FILE_TYPES.includes(file.type)) {\r\n        videos.push(file)\r\n      }\r\n    }\r\n  }\r\n\r\n  return videos\r\n}\r\n\r\nfunction randomInteger(min, max) {\r\n  let rand = min + Math.random() * (max + 1 - min);\r\n  return Math.floor(rand);\r\n}\r\n\r\nconst CommandWebm = {\r\n  text: \"webm\",\r\n  handler: (params, data) => {\r\n    if (!params[0]) {\r\n      return data.bot.sendMessage(\"Использование: !webm <thread>.\")\r\n    }\r\n\r\n    getRandomWebm(params[0]).then(webm => {\r\n      addMedia({\r\n        user: data.username,\r\n        video: webm\r\n      })\r\n    }).catch(() => {\r\n      data.bot.sendMessage(\"Ссылка всратая. Исправляй.\")\r\n    })\r\n  }\r\n}\r\n\r\nexport default CommandWebm","import filterMessage from \"./util/message-filter\"\r\nimport stringifyStyles from \"./util/stringifyStyles\"\r\n\r\nimport Command from \"./Command\"\r\n\r\nimport CommandDice from \"./commands/dice\"\r\nimport CommandWebm from \"./commands/webm\"\r\n\r\nclass Bot {\r\n  constructor(config) {\r\n    Object.assign(this, {\r\n      name: \"Bot\",\r\n      cmdFilterPrefix: \"!\",\r\n      commands: [],\r\n      messageStyles: {\r\n        message: {\r\n          display: \"inline\"\r\n        },\r\n        name: {\r\n          color: \"pink\"\r\n        }\r\n      }\r\n    }, config)\r\n\r\n    this.botSendMessage = false\r\n\r\n    this.registerListeners(config.socket)\r\n    this.registerDefaultCommnds()\r\n    this.applyBotMessageStyles()\r\n\r\n    console.log(\"Simple Cytube Bot successfuly initialzed!\")\r\n  }\r\n\r\n  registerListeners(socket) {\r\n    socket.on(\"chatMsg\", data => {\r\n      if (this.botSendMessage) {\r\n        window.LASTCHAT.name = \"\"\r\n        this.botSendMessage = false\r\n      }\r\n\r\n      if (data.msg[0] === this.cmdFilterPrefix) {\r\n        this.commandDispatch(data)\r\n      }\r\n    })\r\n  }\r\n\r\n  registerDefaultCommnds() {\r\n    this.commandRegister(CommandDice)\r\n    this.commandRegister(CommandWebm)\r\n  }\r\n\r\n  applyBotMessageStyles() {\r\n    let elementStyle = document.createElement(\"style\");\r\n    let messageStyles = stringifyStyles(this.messageStyles.message)\r\n    let nameStyles = stringifyStyles(this.messageStyles.name)\r\n\r\n    elementStyle.innerHTML = \"/* Simple Cytube Bot Styles */ \"\r\n    elementStyle.innerHTML += `.chat-msg-bot { ${messageStyles} }`\r\n    elementStyle.innerHTML += `.bot-name { ${nameStyles} }`\r\n\r\n    document.head.appendChild(elementStyle)\r\n  }\r\n\r\n  commandRegister(config) {\r\n    this.commands.push(new Command(config))\r\n  }\r\n\r\n  commandDispatch(data) {\r\n    let split = filterMessage(data.msg).split(\" \")\r\n    let cmdText = split.shift().slice(1)\r\n    let params = split\r\n\r\n    this.commands.find(cmd => {\r\n      if (cmd.text === cmdText) {\r\n        data.bot = this;\r\n\r\n        cmd.recieve(params, data)\r\n      }\r\n    })\r\n  }\r\n\r\n  sendMessage(message) {\r\n    if (window.CLIENT.name === window.LASTCHAT.name) {\r\n      let formatedMessage = `[botmsg][botname]${this.name}: [/botname]${message}[/botmsg]`\r\n      this.socket.emit(\"chatMsg\", { msg: formatedMessage })\r\n    }\r\n\r\n    this.botSendMessage = true\r\n  }\r\n}\r\n\r\nwindow.SimpleCytubeBot = Bot;"]}